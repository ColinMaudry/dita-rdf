<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='text/html;charset=utf-8' http-equiv='Content-Type'>
    <title>RDF Distiller</title>
    <link href='/css/main.css' rel='stylesheet' type='text/css'>
    <script charset='utf-8' src='https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js' type='text/javascript'></script>
    <script>
      // Navigation
      $(function () {
        // Select appropriate nav tab
        var href = window.location.pathname;
        $('nav.main a').removeClass('selected');
        $('nav.main a[href="' + href + '"]').addClass('selected');
      });
    </script>
    <script type="text/javascript">
    // Navigation
    $(function () {
      // Display field sets having class of
      // Clicking on a tab hides fieldsets not having that hash element as a class
      $('nav.distiller a').click(function() {
        var cls = this.hash.substr(1);
        $('fieldset').hide();
        $('fieldset.' + cls).show();
        $('nav.distiller a').removeClass('selected');
        $(this).addClass('selected');
        return(false); // No bubbling, leave history alone.
      });
    
      // Hide fieldsets
      $('fieldset').hide();
    
      // Select appropriate nav tab
      var cls = window.location.hash.substr(1);
      $('nav.distiller a:first').each(function(){
        $('fieldset.' + this.className).show();
        $(this).addClass('selected');
      });
      
      // If the output format is rdfa, re-write the result text area
      // as an iFrame and add results
      $('div.results textarea.rdfa').each(function() {
        var content = $(this).val();
        $(this).after($('<iframe width="100%"/>'));
        setTimeout(function() {
          var iframe = $('div.results iframe')[0];
          var iframe_doc = iframe.contentWindow.document;
          iframe_doc.open(); iframe_doc.close(); // must open and close document object to start using it!
          iframe_doc.write(content);
          setTimeout(function() {
            var innerDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;
            var height = innerDoc.body.offsetHeight;
            if (height === null && iframe.Document && iframe.Document.body.scrollHeight) {
              height = iframe.Document.body.scrollHeight;
            }
            $(iframe).attr('height', height);
          }, 10);
        }, 1);
      }).hide();
    
    });
    
    </script>
  </head>
  <body>
    <header>
      <nav class="main">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/distiller">Distiller</a></li>
          <li><a href="/sparql">SPARQL endpoint</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/doap">Project Descriptions</a></li>
          <li><a target="_blank" href="/yard/index.html">Documentation</a></li>
        </ul>
      </nav>
    </header>
    <h1>RDF Distiller</h1>
    <p>
      RDF.rb is a <span property="doap:programming-language">Ruby</span> Gem
      implementing RDF graphs, readers and writers to help integrate semantic technologies
      into Ruby projects.
    </p>
    <p>
      The distiller transforms data between different RDF formats.
      The <a href="#distiller">form below</a> can be used to start the service installed at this site.
    </p>
    <nav class='distiller'>
      <ul>
        <li>
          <a class='url' href='#url'>
            From URL
          </a>
        </li>
        <li>
          <a class='input' href='#input'>
            From Form Input
          </a>
        </li>
      </ul>
    </nav>
    <form action='/distiller' enctype='multipart/form-data' method='post'>
      <fieldset class='url upload input'>
        <legend>
          Distill RDF Information
        </legend>
        <fieldset class='url upload input'>
          <label for='uri'>
            URI
          </label>
          <input id='uri' name='uri' size='80' type='text'>
        </fieldset>
        <fieldset class='url upload input'>
          <legend>
            Options
          </legend>
          <p>
            <label for='in_fmt'>
              Input Format:
            </label>
            <select id='in_fmt' name='in_fmt'>
              <option value='content'>
                Content Detect
              </option>
              <option value='json'>json</option>
              <option value='jsonld'>jsonld</option>
              <option value='microdata'>microdata</option>
              <option value='n3'>n3</option>
              <option value='nquads'>nquads</option>
              <option value='ntriples'>ntriples</option>
              <option value='rdfa'>rdfa</option>
              <option value='rdfxml'>rdfxml</option>
              <option value='trig'>trig</option>
              <option value='trix'>trix</option>
              <option value='turtle'>turtle</option>
            </select>
            <label for='fmt'>
              Output Format:
            </label>
            <select id='in_fmt' name='fmt'>
              <option value='json'>json</option>
              <option value='jsonld'>jsonld</option>
              <option value='microdata'>microdata</option>
              <option value='n3'>n3</option>
              <option value='nquads'>nquads</option>
              <option value='ntriples'>ntriples</option>
              <option value='rdfa'>rdfa</option>
              <option value='rdfxml'>rdfxml</option>
              <option value='trig'>trig</option>
              <option value='trix'>trix</option>
              <option selected='selected' value='turtle'>turtle</option>
            </select>
          </p>
          <p>
            <label for='debug'>
              Show Parser debug information:
            </label>
            <input id='debug' name='debug' type='checkbox' value='true'>
            <br>
            <label for='validate'>
              Validate Input:
            </label>
            <input id='validate' name='validate' type='checkbox' value>
            <br>
            <label for='vocab_expnsion'>
              Expand graph (RDFa only):
            </label>
            <input id='vocab_expansion' name='vocab_expansion' type='checkbox' value>
            <br>
            <label for='rdfagraph'>
              Output Graph (RDFa only):
            </label>
            <select id='rdfagraph' name='rdfagraph'>
              <option value='output'>output</option>
              <option value='processor'>processor</option>
              <option value='output,processor'>output,processor</option>
            </select>
            <br>
            <label for='raw'>
              Raw Output:
            </label>
            <input id='raw' name='raw' type='checkbox' value>
          </p>
        </fieldset>
        <fieldset class='input'>
          <legend>
            Markup
          </legend>
          <textarea class='input' cols='128' id='content' name='content' rows='15'></textarea>
        </fieldset>
        <input name='commit' type='submit' value='Submit'>
      </fieldset>
    </form>
    <div class='results'>
      <h2>
        Result
      </h2>
      <p></p>
      Note, to see result directly, such as formatted HTML for RDFa output, choose the 'Raw Output' option above.
      <textarea class='turtle' cols='128' rows='20'></textarea>
    </div>
    <div>
      <h2>
        Alternative access to the Distiller
      </h2>
      <p>
        The distiller URI may be used directly with an HTML GET by passing the source URI and other options as parameters:
      </p>
      <pre class='alt_access'><a href='http://rdf.greggkellogg.net/distiller?format=turtle&amp;rdfagraph=&amp;uri=http://www.example.com/' target='_blank'>http://rdf.greggkellogg.net/distiller?format=turtle&amp;rdfagraph=&amp;uri=http://www.example.com/</a></pre>
    </div>
    <footer>
      This is version 1.1.5.2 of the RDF Distiller developed and hosted by <a target="_blank" href="http://greggkellogg.net/">Kellogg Associates</a>.
      Please consider us when looking for Ruby Linked Data solutions.
    </footer>
  </body>
</html>
